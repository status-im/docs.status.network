"use strict";(self.webpackChunkstatus_network_docs=self.webpackChunkstatus_network_docs||[]).push([[7206],{6013:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"general-info/gasless-transactions","title":"Gasless Transactions on Status Network","description":"Learn how Status Network implements gasless transactions using RLN (Rate Limiting Nullifier), and Karma tiers for spam prevention and fair usage.","source":"@site/docs/general-info/gasless-transactions.md","sourceDirName":"general-info","slug":"/general-info/gasless-transactions","permalink":"/general-info/gasless-transactions","draft":false,"unlisted":false,"editUrl":"https://github.com/status-im/docs.status.network/tree/develop/docs/general-info/gasless-transactions.md","tags":[],"version":"current","lastUpdatedAt":1765912246000,"frontMatter":{"sidebar_label":"\u26fd Gasless Transactions","title":"Gasless Transactions on Status Network","description":"Learn how Status Network implements gasless transactions using RLN (Rate Limiting Nullifier), and Karma tiers for spam prevention and fair usage.","keywords":["Status Network","Gasless Transactions","Linea","RLN","Rate Limiting Nullifier","Karma","Zero-Knowledge Proofs","ZKP","Soulbound Tokens","Blockchain","Layer 2","L2","Spam Prevention"]},"sidebar":"tutorialSidebar","previous":{"title":"\ud83c\udf10 Network Details","permalink":"/general-info/network-details"},"next":{"title":"\u2795 Add Status Network","permalink":"/general-info/add-status-network"}}');var t=n(4848),i=n(8453);const a={sidebar_label:"\u26fd Gasless Transactions",title:"Gasless Transactions on Status Network",description:"Learn how Status Network implements gasless transactions using RLN (Rate Limiting Nullifier), and Karma tiers for spam prevention and fair usage.",keywords:["Status Network","Gasless Transactions","Linea","RLN","Rate Limiting Nullifier","Karma","Zero-Knowledge Proofs","ZKP","Soulbound Tokens","Blockchain","Layer 2","L2","Spam Prevention"]},o="Gasless Transactions in Status Network",l={},c=[{value:"RLN",id:"rln",level:3},{value:"RLN Membership Management",id:"rln-membership-management",level:3},{value:"System Components",id:"system-components",level:2},{value:"Prover",id:"prover",level:3},{value:"RLN Verifier",id:"rln-verifier",level:3},{value:"Deny List",id:"deny-list",level:3},{value:"<code>linea_estimateGas</code> RPC Modification",id:"linea_estimategas-rpc-modification",level:3}];function d(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"gasless-transactions-in-status-network",children:"Gasless Transactions in Status Network"})}),"\n",(0,t.jsxs)(s.p,{children:["Status Network aims to introduce gasless transactions at scale. The key component of this gasless approach is Vac's ",(0,t.jsx)(s.a,{href:"https://vac.dev/rln",children:"Rate Limiting Nullifier"}),", which permits transaction rate limitation without the need for traditional gas fees. The document describes the architecture and integration elements needed to safely enable gasless transactions."]}),"\n",(0,t.jsxs)(s.p,{children:["The implementation code for these gasless transactions is available in the ",(0,t.jsx)(s.a,{href:"https://github.com/status-im/status-network-monorepo?tab=readme-ov-file#architecture-components",children:"Status Network monorepo"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"rln",children:"RLN"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"https://vac.dev/rln",children:"RLN"})," is a zero-knowledge system designed to prevent spam without compromising user privacy unless a violation occurs. It replaces traditional gas fees with cryptographic rate limits enforced via ZKPs and Shamir's Secret Sharing."]}),"\n",(0,t.jsx)(s.p,{children:"RLN characteristics:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Zero-Knowledge Proofs:"})," Users generate ZKPs verifying their RLN group membership without revealing their identity. The group membership indicates the maximum gasless transaction throughput for each tier."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Shamir's Secret Sharing and Nullifiers:"})," Users hold a secret key used to generate unique nullifiers for transactions. If a user exceeds their transaction limit within an epoch (e.g., block or timestamp), their secret key becomes recoverable, exposing them."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Spam Detection:"})," Users exceeding limits effectively reveal their secret, leading to penalties like Deny List inclusion, higher future gas costs, or potential token slashing."]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"rln-membership-management",children:"RLN Membership Management"}),"\n",(0,t.jsx)(s.p,{children:"RLN uses Sparse Merkle Trees to efficiently handle large-scale membership proofs. A benchmarking study determined that a tree height of 20, supporting 1 million accounts, provides optimal performance for proof generation and verification. For scalability beyond 1 million accounts, multiple SMTs can be used with a registry to direct users to the appropriate tree."}),"\n",(0,t.jsx)(s.p,{children:"The Prover includes a Registrar Service that listens for events from the Karma Contract, where Karma is allocated to new addresses. Upon detecting such an event, the Registrar Service onboards the user to the RLN Membership Contract by generating and registering their RLN credentials (identitySecretHash and identityCommitment). The RLN Prover Service generates proofs for transactions, which are streamed via gRPC to the RLN Verifier in the Sequencer. The Verifier stores these proofs in memory and matches them with incoming transactions based on transaction hashes, as the process is asynchronous."}),"\n",(0,t.jsx)(s.mermaid,{value:'graph TD\n    A[User Wallet] --\x3e|First L2 Action via Whitelisted App| B(Karma Issued)\n    A --\x3e|Bridges into SN| B\n    B --\x3e|Soulbound Token| C{Tier Assignment}\n\n    subgraph "Tier Limits"\n        D[Basic]\n        E[Active]\n        F[Regular]\n        G[Power User]\n        H[High-Throughput]\n        I[S-Tier]\n    end\n\n    C --\x3e D\n    C --\x3e E\n    C --\x3e F\n    C --\x3e G\n    C --\x3e H\n    C --\x3e I\n\n    %% RLN Flow\n    A --\x3e|Submits Gasless Tx| J[RPC Node]\n    J --\x3e|Forwards Tx Data| K[Prover]\n    subgraph "Prover Services"\n        K --\x3e K1[Registrar Service]\n        K --\x3e K2[RLN Prover Service]\n        K --\x3e K3[Karma API Service]\n        K1 --\x3e|Listens for Karma Events| L[Karma Contract]\n        K1 --\x3e|Onboards User| M[RLN Membership Contract]\n        K2 --\x3e|Generates RLN Proof| N[gRPC Stream]\n        K3 --\x3e|Tracks Tx and Karma Tiers| O[Storage]\n    end\n    J --\x3e|Sends Tx| P[Sequencer]\n    N --\x3e|Streams RLN Proof| P\n\n    %% Sequencer Section\n    subgraph "Sequencer Operations"\n        P --\x3e Q[RLN Verifier Plugin]\n        Q --\x3e|Subscribes to gRPC Stream| N\n        Q --\x3e|Stores Proofs In-Memory| R{Match Tx Hash}\n        R --\x3e|Validates RLN Proof| S{Quota Check}\n        S --\x3e|Within Limit| T[Add to Mempool]\n        S --\x3e|Exceeds Limit| U[Deny List]\n        U --\x3e|Flags Address| V[Premium Gas Required]\n        Q --\x3e|Spam Detected| W[Slash RLN Stake]\n    end\n\n    %% Gas Estimation Flow\n    A --\x3e|Requests Gas Estimate| X[Modified linea_estimateGas RPC]\n    X --\x3e|Queries| U\n    U --\x3e|Address Listed| Y[Apply Premium Gas Multiplier]\n    Y --\x3e|Pay Premium Gas| Z[Remove from Deny List]\n    Z --\x3e|Earn Karma| B\n    U --\x3e|Address Not Listed| AA[Standard Gas Estimate]\n\n    %% Styling\n    classDef wallet fill:#FFD700,stroke:#DAA520,color:#333\n    classDef karma fill:#98FB98,stroke:#2E8B57,color:#333\n    classDef tier fill:#87CEFA,stroke:#4682B4,color:#333\n    classDef tierNode fill:#ADD8E6,stroke:#4682B4,color:#333\n    classDef rln fill:#FFB6C1,stroke:#DB7093,color:#333\n    classDef sequencer fill:#DDA0DD,stroke:#BA55D3,color:#333\n    classDef gas fill:#FFA07A,stroke:#FF4500,color:#333\n\n    class A wallet\n    class B,L karma\n    class C tier\n    class D,E,F,G,H,I tierNode\n    class J,K,K1,K2,K3,M,N,O rln\n    class P,Q,R,S,T,U,V,W sequencer\n    class X,Y,Z,AA gas'}),"\n",(0,t.jsx)(s.h2,{id:"system-components",children:"System Components"}),"\n",(0,t.jsx)(s.h3,{id:"prover",children:"Prover"}),"\n",(0,t.jsx)(s.p,{children:"The Prover is a system comprising three services:"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Registrar Service"}),": Listens for Karma allocation events from the Karma Contract. When a new address receives Karma, it onboards the user to the RLN Membership Contract by generating RLN credentials and registering them."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"RLN Prover Service"}),": Generates RLN proofs for transactions using the Zerokit library. Proofs are streamed directly to the RLN Verifier in the Sequencer via a gRPC stream."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Karma API Service"}),": Tracks transactions made by users within an epoch and maintains their Karma tier status. It stores transaction data in an internal database for efficient querying and tier management."]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"These services ensure secure credential management, proof generation, and transaction tracking, with gRPC enabling low-latency communication with the Sequencer."}),"\n",(0,t.jsx)(s.h3,{id:"rln-verifier",children:"RLN Verifier"}),"\n",(0,t.jsx)(s.p,{children:"The RLN Verifier is a besu plugin inside the sequencer, leveraging RLN's Zerokit Rust library via Java Native Interface.\nThe Verifier:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Subscribes to the gRPC stream from the RLN Prover Service to receive RLN proofs as they are generated."}),"\n",(0,t.jsx)(s.li,{children:"Stores proofs in memory and matches them with incoming transactions based on transaction hashes, accounting for the asynchronous arrival of transactions (via RPC Node) and proofs (via gRPC)."}),"\n",(0,t.jsx)(s.li,{children:"Verifies proof authenticity, nullifier uniqueness, and user transaction quotas."}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Transactions failing verification are rejected, and users may be temporarily added to the Deny List."}),"\n",(0,t.jsx)(s.h3,{id:"deny-list",children:"Deny List"}),"\n",(0,t.jsx)(s.p,{children:"The Deny List temporarily restricts users exceeding quotas or engaging in spam:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Entries expire after a set duration (e.g., hours or days) based on the throughput tiers"}),"\n",(0,t.jsx)(s.li,{children:"Users can bypass restrictions by paying premium gas fees"}),"\n",(0,t.jsx)(s.li,{children:"Paying premium fees removes users from the list and earns additional Karma"}),"\n"]}),"\n",(0,t.jsxs)(s.h3,{id:"linea_estimategas-rpc-modification",children:[(0,t.jsx)(s.code,{children:"linea_estimateGas"})," RPC Modification"]}),"\n",(0,t.jsx)(s.p,{children:"The linea_estimateGas method is customised to account for users on the Deny List:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Checks user's Deny List status"}),"\n",(0,t.jsx)(s.li,{children:"Adds premium gas multipliers if needed"}),"\n",(0,t.jsx)(s.li,{children:"Provides transparency and accurate gas estimations to the users"}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>o});var r=n(6540);const t={},i=r.createContext(t);function a(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);